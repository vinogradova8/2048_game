function e(e,n){(null==n||n>e.length)&&(n=e.length);for(var r=0,t=Array(n);r<n;r++)t[r]=e[r];return t}function n(n){return function(n){if(Array.isArray(n))return e(n)}(n)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(n)||function(n,r){if(n){if("string"==typeof n)return e(n,void 0);var t=Object.prototype.toString.call(n).slice(8,-1);if("Object"===t&&n.constructor&&(t=n.constructor.name),"Map"===t||"Set"===t)return Array.from(t);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return e(n,void 0)}}(n)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var r=document.querySelector("button"),t=document.querySelector(".message-start"),i=document.querySelector(".message-win"),o=document.querySelector(".message-lose"),l=n(document.querySelectorAll(".field-row")),c=document.querySelector(".game-score");c.innerText=0;for(var a=document.querySelector(".game-field"),d=0,s=n(document.querySelectorAll(".field-cell")),u=[],f=0;f<=3;f++){for(var x=[],v=f;v<=s.length-1;v+=4)x.push(s[v]);u.push(x)}function y(e,n){return e+Math.ceil(Math.random()*n-e)}function T(){n(document.querySelectorAll(".field-cell")).forEach(function(e){if(""===e.innerText){for(var n=2;n<=2048;n*=2)e.classList.contains("field-cell--".concat(n))&&e.classList.remove("field-cell--".concat(n));e.classList.add("field-cell--0")}else{e.classList.contains("field-cell--0")&&e.classList.remove("field-cell--0");for(var r=2;r<=2048;r*=2)e.classList.contains("field-cell--".concat(r))&&e.classList.remove("field-cell--".concat(r));e.classList.add("field-cell--".concat(e.innerText))}})}function h(){var e=1===y(1,10)?4:2,n=function(){for(var e=y(1,16),n=document.querySelector(".field-cell--n".concat(e));""!==n.innerText;)e=y(1,16),n=document.querySelector(".field-cell--n".concat(e));return n}();setTimeout(function(){n.classList.add("field-cell--".concat(e)),n.innerText=e},100)}function m(e){for(var n=e.length-1;n>0;n--)""===e[n].innerText&&(e[n].innerText=e[n-1].innerText,e[n-1].innerText="")}function g(e){for(var n=0;n<e.length-1;n++)""===e[n].innerText&&(e[n].innerText=e[n+1].innerText,e[n+1].innerText="")}function S(e,n){var r=[],t=!0,i=!1,o=void 0;try{for(var l,c=e[Symbol.iterator]();!(t=(l=c.next()).done);t=!0){var a=l.value;r.push(a.innerText)}}catch(e){i=!0,o=e}finally{try{t||null==c.return||c.return()}finally{if(i)throw o}}r.includes("")&&(("ArrowRight"===n||"ArrowDown"===n)&&(m(e),m(e)),("ArrowLeft"===n||"ArrowUp"===n)&&(g(e),g(e)))}function L(){var e=0,n=!0,r=!1,t=void 0;try{for(var c,f=l[Symbol.iterator]();!(n=(c=f.next()).done);n=!0)for(var x=c.value,v=0;v<3;v++)x.children[v].innerText!==x.children[v+1].innerText&&""!==x.children[v].innerText&&""!==x.children[v+1].innerText&&e++}catch(e){r=!0,t=e}finally{try{n||null==f.return||f.return()}finally{if(r)throw t}}var y=!0,T=!1,h=void 0;try{for(var m,g=u[Symbol.iterator]();!(y=(m=g.next()).done);y=!0)for(var S=m.value,L=0;L<3;L++)S[L].innerText!==S[L+1].innerText&&""!==S[L].innerText&&""!==S[L+1].innerText&&e++}catch(e){T=!0,h=e}finally{try{y||null==g.return||g.return()}finally{if(T)throw h}}var w=s.map(function(e){return e.innerText});24===e&&(o.classList.remove("hidden"),a.classList.add("game-over"),d++),w.includes("2048")&&(i.classList.remove("hidden"),a.classList.add("game-over"),d++),d>0&&24===e&&(a.classList.add("game-over"),o.classList.remove("hidden"))}T(),r.addEventListener("click",function(){if(r.classList.contains("start")){r.innerText="Restart",r.classList.remove("start"),r.classList.add("restart"),t.classList.add("hidden"),h(),h();return}r.classList.contains("restart")&&(s.forEach(function(e){e.innerText=""}),T(),i.classList.add("hidden"),o.classList.add("hidden"),a.classList.remove("game-over"),c.innerText=0,d=0,h(),h())}),document.addEventListener("keydown",function(e){if("ArrowRight"===e.code&&!(d>0)){var n=s.map(function(e){return e.innerText}),r=!0,t=!1,i=void 0;try{for(var o,a=l[Symbol.iterator]();!(r=(o=a.next()).done);r=!0){for(var u=o.value,f=u.children.length-1;f>0;f--)S(u.children,e.code),u.children[f].innerText===u.children[f-1].innerText&&""!==u.children[f].innerText&&(u.children[f].innerText="".concat(2*+u.children[f].innerText),u.children[f-1].innerText="",c.innerText=+c.innerText+ +u.children[f].innerText);T()}}catch(e){t=!0,i=e}finally{try{r||null==a.return||a.return()}finally{if(t)throw i}}var x=s.map(function(e){return e.innerText});JSON.stringify(n)!==JSON.stringify(x)&&0===d&&h(),L()}}),document.addEventListener("keydown",function(e){if("ArrowDown"===e.code&&!(d>0)){var n=s.map(function(e){return e.innerText}),r=!0,t=!1,i=void 0;try{for(var o,l=u[Symbol.iterator]();!(r=(o=l.next()).done);r=!0){for(var a=o.value,f=a.length-1;f>0;f--)S(a,e.code),a[f].innerText===a[f-1].innerText&&""!==a[f].innerText&&(a[f].innerText="".concat(2*+a[f].innerText),a[f-1].innerText="",c.innerText=+c.innerText+ +a[f].innerText);T()}}catch(e){t=!0,i=e}finally{try{r||null==l.return||l.return()}finally{if(t)throw i}}var x=s.map(function(e){return e.innerText});JSON.stringify(n)!==JSON.stringify(x)&&0===d&&h(),L()}}),document.addEventListener("keydown",function(e){if("ArrowLeft"===e.code&&!(d>0)){var n=s.map(function(e){return e.innerText}),r=!0,t=!1,i=void 0;try{for(var o,a=l[Symbol.iterator]();!(r=(o=a.next()).done);r=!0){for(var u=o.value,f=0;f<u.children.length-1;f++)S(u.children,e.code),u.children[f].innerText===u.children[f+1].innerText&&""!==u.children[f].innerText&&(u.children[f].innerText="".concat(2*+u.children[f+1].innerText),u.children[f+1].innerText="",c.innerText=+c.innerText+ +u.children[f].innerText);T()}}catch(e){t=!0,i=e}finally{try{r||null==a.return||a.return()}finally{if(t)throw i}}var x=s.map(function(e){return e.innerText});JSON.stringify(n)!==JSON.stringify(x)&&0===d&&h(),L()}}),document.addEventListener("keydown",function(e){if("ArrowUp"===e.code&&!(d>0)){var n=s.map(function(e){return e.innerText}),r=!0,t=!1,i=void 0;try{for(var o,l=u[Symbol.iterator]();!(r=(o=l.next()).done);r=!0){for(var a=o.value,f=0;f<a.length-1;f++)S(a,e.code),a[f].innerText===a[f+1].innerText&&""!==a[f].innerText&&(a[f].innerText="".concat(2*+a[f+1].innerText),a[f+1].innerText="",c.innerText=+c.innerText+ +a[f].innerText);T()}}catch(e){t=!0,i=e}finally{try{r||null==l.return||l.return()}finally{if(t)throw i}}var x=s.map(function(e){return e.innerText});JSON.stringify(n)!==JSON.stringify(x)&&0===d&&h(),L()}});
//# sourceMappingURL=index.8ba28be8.js.map
